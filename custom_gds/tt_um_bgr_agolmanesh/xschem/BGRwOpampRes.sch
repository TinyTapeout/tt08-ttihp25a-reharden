v {xschem version=3.4.5 file_version=1.2
}
G {}
K {}
V {}
S {}
E {}
B 2 400 -490 1200 -90 {flags=graph
y1=0
y2=2.4
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=0
x2=5e-05
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
node="vdd
vbgr"
color="6 5"
dataset=-1
unitx=1
logx=0
logy=0
}
B 2 400 -900 1200 -500 {flags=graph
y1=-50
y2=140
ypos1=0
ypos2=2
divy=5
subdivy=1
unity=1
x1=0
x2=5e-05
divx=5
subdivx=1
xlabmag=1.0
ylabmag=1.0
node=temperat
color=4
dataset=-1
unitx=1
logx=0
logy=0
}
N -1020 60 -1020 135 {
lab=VSS}
N -1320 60 -1320 135 {
lab=VSS}
N -980 30 -940 30 {
lab=VSS}
N -1395 30 -1360 30 {
lab=VSS}
N -705 -725 -705 -650 {
lab=VDD}
N -1320 -725 -1320 -655 {
lab=VDD}
N -1020 -725 -1020 -655 {
lab=VDD}
N -1275 -625 -1070 -625 {
lab=opout}
N -1120 -775 -1120 -725 {
lab=VDD}
N -830 -620 -770 -620 {
lab=opout}
N -1175 -640 -1175 -625 {
lab=opout}
N -1320 -250 -1320 -110 {
lab=MINUS}
N -1485 -95 -1485 -75 {
lab=VSS}
N -1070 -625 -1060 -625 {
lab=opout}
N -1320 -725 -1315 -725 {
lab=VDD}
N -1280 -625 -1275 -625 {
lab=opout}
N -1025 -625 -995 -625 {
lab=VDD}
N -995 -660 -995 -625 {
lab=VDD}
N -1020 -660 -995 -660 {
lab=VDD}
N -710 -620 -685 -620 {
lab=VDD}
N -685 -655 -685 -620 {
lab=VDD}
N -705 -655 -685 -655 {
lab=VDD}
N -1345 -625 -1315 -625 {
lab=VDD}
N -1345 -660 -1345 -625 {
lab=VDD}
N -1345 -660 -1320 -660 {
lab=VDD}
N -705 -560 -655 -560 {
lab=Vbgr}
N -1320 -595 -1320 -575 {
lab=#net1}
N -1020 -595 -1020 -575 {
lab=#net2}
N -705 -590 -705 -575 {
lab=Vbgr}
N -630 -670 -630 -635 {
lab=VDD}
N -630 -595 -630 -585 {
lab=Vbgr}
N -935 -675 -935 -650 {
lab=VDD}
N -1020 -675 -935 -675 {
lab=VDD}
N -935 -610 -935 -580 {
lab=#net2}
N -1020 -580 -935 -580 {
lab=#net2}
N -1425 -675 -1425 -650 {
lab=VDD}
N -1425 -675 -1320 -675 {
lab=VDD}
N -1425 -610 -1425 -590 {
lab=#net1}
N -1425 -590 -1320 -590 {
lab=#net1}
N -1695 -610 -1570 -610 {
lab=opout}
N -1955 -455 -1695 -455 {
lab=Sop}
N -1830 -455 -1830 -385 {
lab=Sop}
N -2145 -265 -2005 -265 {
lab=Gcm2}
N -2185 -325 -2185 -295 {
lab=Gcm2}
N -2005 -265 -1870 -265 {
lab=Gcm2}
N -2185 -315 -2115 -315 {
lab=Gcm2}
N -2115 -315 -2115 -265 {
lab=Gcm2}
N -1830 -235 -1830 -200 {
lab=VSS}
N -2185 -235 -2185 -200 {
lab=VSS}
N -1830 -265 -1790 -265 {
lab=VSS}
N -1790 -265 -1790 -210 {
lab=VSS}
N -1830 -210 -1790 -210 {
lab=VSS}
N -2220 -265 -2185 -265 {
lab=VSS}
N -2220 -265 -2220 -205 {
lab=VSS}
N -2220 -205 -2185 -205 {
lab=VSS}
N -1955 -500 -1955 -455 {
lab=Sop}
N -1695 -500 -1695 -455 {
lab=Sop}
N -1695 -575 -1695 -560 {
lab=opout}
N -1695 -645 -1695 -575 {
lab=opout}
N -1955 -645 -1955 -560 {
lab=Gcm1}
N -1915 -675 -1735 -675 {
lab=Gcm1}
N -1955 -620 -1900 -620 {
lab=Gcm1}
N -1900 -675 -1900 -620 {
lab=Gcm1}
N -1695 -760 -1695 -705 {
lab=VDD}
N -1955 -760 -1695 -760 {
lab=VDD}
N -1955 -760 -1955 -705 {
lab=VDD}
N -1830 -785 -1830 -760 {
lab=VDD}
N -1955 -530 -1905 -530 {
lab=VSS}
N -1740 -570 -1740 -530 {
lab=VSS}
N -1740 -530 -1695 -530 {
lab=VSS}
N -1905 -560 -1905 -530 {
lab=VSS}
N -1855 -580 -1855 -555 {
lab=Gcm1}
N -1955 -580 -1855 -580 {
lab=Gcm1}
N -1855 -515 -1855 -455 {
lab=Sop}
N -1795 -515 -1795 -455 {
lab=Sop}
N -1795 -580 -1795 -555 {
lab=opout}
N -1795 -580 -1695 -580 {
lab=opout}
N -2055 -530 -1995 -530 {
lab=PLUS}
N -1655 -530 -1590 -530 {
lab=MINUS}
N -1985 -675 -1955 -675 {
lab=VDD}
N -1985 -730 -1985 -675 {
lab=VDD}
N -1985 -730 -1955 -730 {
lab=VDD}
N -1700 -675 -1670 -675 {
lab=VDD}
N -1670 -725 -1670 -675 {
lab=VDD}
N -1695 -725 -1670 -725 {
lab=VDD}
N -2065 -715 -2065 -690 {
lab=VDD}
N -2065 -715 -1955 -715 {
lab=VDD}
N -2065 -620 -1955 -620 {
lab=Gcm1}
N -2065 -650 -2065 -620 {
lab=Gcm1}
N -1580 -735 -1580 -695 {
lab=VDD}
N -1695 -735 -1580 -735 {
lab=VDD}
N -1580 -655 -1580 -640 {
lab=opout}
N -1580 -640 -1580 -635 {
lab=opout}
N -1695 -635 -1580 -635 {
lab=opout}
N -1715 -320 -1715 -265 {
lab=#net3}
N -1830 -320 -1715 -320 {
lab=#net3}
N -1715 -225 -1715 -205 {
lab=VSS}
N -1830 -205 -1715 -205 {
lab=VSS}
N -2280 -310 -2280 -290 {
lab=Gcm2}
N -2280 -310 -2185 -310 {
lab=Gcm2}
N -2280 -250 -2280 -205 {
lab=VSS}
N -2280 -205 -2220 -205 {
lab=VSS}
N -1830 -325 -1830 -295 {
lab=#net3}
N -2185 -760 -1955 -760 {
lab=VDD}
N -2185 -760 -2185 -710 {
lab=VDD}
N -2145 -680 -2120 -680 {
lab=opout}
N -2210 -680 -2180 -680 {
lab=VDD}
N -2210 -720 -2210 -680 {
lab=VDD}
N -2210 -720 -2185 -720 {
lab=VDD}
N -2185 -650 -2185 -590 {
lab=#net4}
N -2185 -535 -2185 -320 {
lab=Gcm2}
N -2280 -650 -2280 -640 {
lab=#net4}
N -2280 -640 -2185 -640 {
lab=#net4}
N -2280 -725 -2280 -690 {
lab=VDD}
N -2280 -725 -2185 -725 {
lab=VDD}
N -1320 -515 -1320 -250 {
lab=MINUS}
N -1020 -500 -905 -500 {
lab=PLUS}
N -1055 -500 -1020 -500 {
lab=PLUS}
N -1320 -505 -1290 -505 {
lab=MINUS}
N -770 -620 -745 -620 {
lab=opout}
N -705 -585 -630 -585 {
lab=Vbgr}
N -705 -670 -630 -670 {
lab=VDD}
N -705 -575 -705 -560 {
lab=Vbgr}
N -705 -500 -705 -485 {
lab=VSS}
N -1315 -725 -1290 -725 {
lab=VDD}
N -1505 -125 -1505 -95 {
lab=VSS}
N -1505 -95 -1485 -95 {
lab=VSS}
N -840 -145 -840 -140 {
lab=PLUS}
N -1485 -170 -1485 -155 {
lab=MINUS}
N -840 -160 -840 -145 {
lab=PLUS}
N -905 -500 -840 -500 {
lab=PLUS}
N -1485 -505 -1485 -375 {
lab=MINUS}
N -1485 -505 -1320 -505 {
lab=MINUS}
N -1290 -725 -705 -725 {
lab=VDD}
N -1320 -110 -1320 0 {
lab=MINUS}
N -840 -500 -840 -160 {
lab=PLUS}
N -1020 -180 -1020 -140 {
lab=PLUS}
N -1060 -110 -1040 -110 {
lab=VSS}
N -1020 -80 -1020 -0 {
lab=#net5}
N -1020 -515 -1020 -180 {
lab=PLUS}
N -650 -315 -650 -295 {
lab=VSS}
N -650 -410 -650 -375 {
lab=opout}
N -715 -345 -690 -345 {
lab=Vbgr}
N -655 -345 -600 -345 {
lab=opout}
N -840 -80 -840 -60 {
lab=VSS}
N -860 -110 -860 -60 {
lab=VSS}
N -860 -60 -840 -60 {
lab=VSS}
N -1485 -375 -1485 -170 {
lab=MINUS}
N 80 -460 80 -440 {
lab=TEMPERAT}
C {sky130_fd_pr/pnp_05v5.sym} -1340 30 0 0 {name=Q1
model=pnp_05v5_W3p40L3p40
m=1
spiceprefix=X
}
C {sky130_fd_pr/pnp_05v5.sym} -1000 30 0 1 {name=Q2
model=pnp_05v5_W3p40L3p40
m=29
spiceprefix=X
}
C {devices/lab_pin.sym} -1320 135 0 0 {name=p1 sig_type=std_logic lab=VSS}
C {devices/lab_pin.sym} -1020 135 0 0 {name=p2 sig_type=std_logic lab=VSS
}
C {devices/lab_pin.sym} -1395 30 0 0 {name=p3 sig_type=std_logic lab=VSS}
C {devices/lab_pin.sym} -940 30 0 1 {name=p4 sig_type=std_logic lab=VSS
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} -1300 -625 0 1 {name=M1
L=0.5
W=20
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} -1040 -625 0 0 {name=M2
L=0.5
W=20
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} -725 -620 0 0 {name=M3
L=0.5
W=20
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {devices/lab_pin.sym} -1120 -775 0 1 {name=p5 sig_type=std_logic lab=VDD
}
C {devices/lab_pin.sym} -1175 -640 0 1 {name=p6 sig_type=std_logic lab=opout
}
C {devices/lab_pin.sym} -830 -620 2 1 {name=p7 sig_type=std_logic lab=opout
}
C {devices/lab_pin.sym} -1485 -75 0 0 {name=p8 sig_type=std_logic lab=VSS}
C {devices/lab_pin.sym} -840 -60 0 1 {name=p9 sig_type=std_logic lab=VSS
}
C {devices/lab_pin.sym} -705 -485 0 1 {name=p10 sig_type=std_logic lab=VSS
}
C {devices/lab_pin.sym} -655 -560 0 1 {name=p13 sig_type=std_logic lab=Vbgr

}
C {devices/vsource.sym} -250 -795 0 0 {name=V1 value=1.8 savecurrent=false
spice_ignore=true}
C {devices/vsource.sym} -340 -795 0 0 {name=V2 value=0 savecurrent=false}
C {devices/gnd.sym} -250 -765 0 0 {name=l1 lab=GND
spice_ignore=true}
C {devices/gnd.sym} -340 -765 0 0 {name=l2 lab=GND}
C {devices/lab_pin.sym} -340 -825 1 0 {name=p14 sig_type=std_logic lab=VSS}
C {devices/lab_pin.sym} -250 -825 3 1 {name=p15 sig_type=std_logic lab=VDD
spice_ignore=true}
C {devices/simulator_commands.sym} -175 -670 0 0 {name=COMMANDS
simulator=ngspice
only_toplevel=false
place=end
value="
.options savecurrents
.control


save @m.xm1.msky130_fd_pr__ppet_01v8_lvt[gm]
save @m.xm1.msky130_fd_pr__pfet_01v8_lvt[id]
save @m.xm1.msky130_fd_pr__pfet_01v8_lvt[vgs]
save @m.xm1.msky130_fd_pr__pfet_01v8_lvt[vds]
save @m.xm1.msky130_fd_pr__pfet_01v8_lvt[cgg]
save @m.xm1.msky130_fd_pr__pfet_01v8_lvt[vdsat]
save @m.xm1.msky130_fd_pr__pfet_01v8_lvt[vth]
save @m.xm1.msky130_fd_pr__pfet_01v8_lvt[gds]


save @m.xm2.msky130_fd_pr__pfet_01v8_lvt[gm]
save @m.xm2.msky130_fd_pr__pfet_01v8_lvt[id]
save @m.xm2.msky130_fd_pr__pfet_01v8_lvt[vgs]
save @m.xm2.msky130_fd_pr__pfet_01v8_lvt[vds]
save @m.xm2.msky130_fd_pr__pfet_01v8_lvt[cgg]
save @m.xm2.msky130_fd_pr__pfet_01v8_lvt[vdsat]
save @m.xm2.msky130_fd_pr__pfet_01v8_lvt[vth]
save @m.xm2.msky130_fd_pr__pfet_01v8_lvt[gds]


save @m.xm3.msky130_fd_pr__pfet_01v8_lvt[gm]
save @m.xm3.msky130_fd_pr__pfet_01v8_lvt[id]
save @m.xm3.msky130_fd_pr__pfet_01v8_lvt[vgs]
save @m.xm3.msky130_fd_pr__pfet_01v8_lvt[vds]
save @m.xm3.msky130_fd_pr__pfet_01v8_lvt[cgg]
save @m.xm3.msky130_fd_pr__pfet_01v8_lvt[vdsat]
save @m.xm3.msky130_fd_pr__pfet_01v8_lvt[vth]
save @m.xm3.msky130_fd_pr__pfet_01v8_lvt[gds]



save @q.xq1.qsky130_fd_pr__pnp_05v5_W3p40L3p40[vbe]
save @q.xq2.qsky130_fd_pr__pnp_05v5_W3p40L3p40[vbe]


save @m.xm6.msky130_fd_pr__pfet_01v8_lvt[gm]
save @m.xm6.msky130_fd_pr__pfet_01v8_lvt[id]
save @m.xm6.msky130_fd_pr__pfet_01v8_lvt[vgs]
save @m.xm6.msky130_fd_pr__pfet_01v8_lvt[vds]
save @m.xm6.msky130_fd_pr__pfet_01v8_lvt[cgg]
save @m.xm6.msky130_fd_pr__pfet_01v8_lvt[vdsat]
save @m.xm6.msky130_fd_pr__pfet_01v8_lvt[vth]

save @m.xm7.msky130_fd_pr__pfet_01v8_lvt[gm]
save @m.xm7.msky130_fd_pr__pfet_01v8_lvt[id]
save @m.xm7.msky130_fd_pr__pfet_01v8_lvt[vgs]
save @m.xm7.msky130_fd_pr__pfet_01v8_lvt[vds]
save @m.xm7.msky130_fd_pr__pfet_01v8_lvt[cgg]
save @m.xm7.msky130_fd_pr__pfet_01v8_lvt[vdsat]
save @m.xm7.msky130_fd_pr__pfet_01v8_lvt[vth]



save @m.xm8.msky130_fd_pr__pfet_01v8_lvt[gm]
save @m.xm8.msky130_fd_pr__pfet_01v8_lvt[id]
save @m.xm8.msky130_fd_pr__pfet_01v8_lvt[vgs]
save @m.xm8.msky130_fd_pr__pfet_01v8_lvt[vds]
save @m.xm8.msky130_fd_pr__pfet_01v8_lvt[cgg]
save @m.xm8.msky130_fd_pr__pfet_01v8_lvt[vdsat]
save @m.xm8.msky130_fd_pr__pfet_01v8_lvt[vth]


save @m.xm4.msky130_fd_pr__nfet_01v8_lvt[gm]
save @m.xm4.msky130_fd_pr__nfet_01v8_lvt[id]
save @m.xm4.msky130_fd_pr__nfet_01v8_lvt[vgs]
save @m.xm4.msky130_fd_pr__nfet_01v8_lvt[vds]
save @m.xm4.msky130_fd_pr__nfet_01v8_lvt[cgg]
save @m.xm4.msky130_fd_pr__nfet_01v8_lvt[vdsat]
save @m.xm4.msky130_fd_pr__nfet_01v8_lvt[vth]


save @m.xm5.msky130_fd_pr__nfet_01v8_lvt[gm]
save @m.xm5.msky130_fd_pr__nfet_01v8_lvt[id]
save @m.xm5.msky130_fd_pr__nfet_01v8_lvt[vgs]
save @m.xm5.msky130_fd_pr__nfet_01v8_lvt[vds]
save @m.xm5.msky130_fd_pr__nfet_01v8_lvt[cgg]
save @m.xm5.msky130_fd_pr__nfet_01v8_lvt[vdsat]
save @m.xm5.msky130_fd_pr__nfet_01v8_lvt[vth]



save @m.xm9.msky130_fd_pr__nfet_01v8_lvt[gm]
save @m.xm9.msky130_fd_pr__nfet_01v8_lvt[id]
save @m.xm9.msky130_fd_pr__nfet_01v8_lvt[vgs]
save @m.xm9.msky130_fd_pr__nfet_01v8_lvt[vds]
save @m.xm9.msky130_fd_pr__nfet_01v8_lvt[cgg]
save @m.xm9.msky130_fd_pr__nfet_01v8_lvt[vdsat]
save @m.xm9.msky130_fd_pr__nfet_01v8_lvt[vth]



save @m.xm10.msky130_fd_pr__nfet_01v8_lvt[gm]
save @m.xm10.msky130_fd_pr__nfet_01v8_lvt[id]
save @m.xm10.msky130_fd_pr__nfet_01v8_lvt[vgs]
save @m.xm10.msky130_fd_pr__nfet_01v8_lvt[vds]
save @m.xm10.msky130_fd_pr__nfet_01v8_lvt[cgg]
save @m.xm10.msky130_fd_pr__nfet_01v8_lvt[vdsat]
save @m.xm10.msky130_fd_pr__nfet_01v8_lvt[vth]


save @m.xm11.msky130_fd_pr__nfet_01v8_lvt[gm]
save @m.xm11.msky130_fd_pr__nfet_01v8_lvt[id]
save @m.xm11.msky130_fd_pr__nfet_01v8_lvt[vgs]
save @m.xm11.msky130_fd_pr__nfet_01v8_lvt[vds]
save @m.xm11.msky130_fd_pr__nfet_01v8_lvt[cgg]
save @m.xm11.msky130_fd_pr__nfet_01v8_lvt[vdsat]
save @m.xm11.msky130_fd_pr__nfet_01v8_lvt[vth]
save all
op
write BGRwOpampRes.raw
dc TEMP 0 80 1
plot deriv(Vbgr)
plot Vbgr

.endc
"
spice_ignore=true}
C {devices/code.sym} -145 -880 0 0 {name=MODELS
only_toplevel=true
format="tcleval( @value )"
value="
** opencircuitdesign pdks install
.lib $::SKYWATER_MODELS/sky130.lib.spice tt

"
}
C {devices/ngspice_get_expr.sym} -1345 -665 0 0 {name=r5 node="[expr [ngspice::get_voltage \{@m.xm1.msky130_fd_pr__pfet_01v8_lvt[vgs]\}]-[ngspice::get_voltage \{@m.xm1.msky130_fd_pr__pfet_01v8_lvt[vth]\}]]"
descr="Vov1="
}
C {devices/ngspice_get_expr.sym} -1065 -655 0 0 {name=r6 node="[expr [ngspice::get_voltage \{@m.xm2.msky130_fd_pr__pfet_01v8_lvt[vgs]\}]-[ngspice::get_voltage \{@m.xm2.msky130_fd_pr__pfet_01v8_lvt[vth]\}]]"
descr="Vov2="
}
C {devices/ngspice_get_expr.sym} -675 -655 0 0 {name=r7 node="[expr [ngspice::get_voltage \{@m.xm3.msky130_fd_pr__pfet_01v8_lvt[vgs]\}]-[ngspice::get_voltage \{@m.xm3.msky130_fd_pr__pfet_01v8_lvt[vth]\}]]"
descr="Vov3="
}
C {devices/ngspice_get_expr.sym} -1075 -40 0 0 {name=r8 node="[expr [ngspice::get_voltage \{@q.xq2.qsky130_fd_pr__pnp_05v5_W3p40L3p40[vbe]\}]]"
descr="Vbe2="
}
C {devices/ngspice_get_expr.sym} -1295 -115 0 0 {name=r9 node="[expr [ngspice::get_voltage \{@q.xq1.qsky130_fd_pr__pnp_05v5_W3p40L3p40[vbe]\}]]"
descr="Vbe1="
}
C {devices/ammeter.sym} -1320 -545 0 0 {name=Vmeas savecurrent=true}
C {devices/ammeter.sym} -1020 -545 0 0 {name=Vmeas1 savecurrent=true}
C {devices/spice_probe_vdiff.sym} -1425 -630 0 0 {name=p16}
C {devices/spice_probe_vdiff.sym} -935 -630 0 0 {name=p17}
C {devices/spice_probe_vdiff.sym} -630 -615 0 0 {name=p18}
C {devices/simulator_commands.sym} -20 -865 0 0 {name=sweepcommand
simulator=ngspice
only_toplevel=false
place=end
value="
*.param qm = 1
.param a = 60e3
*.param b = 85e3
.option warn=1
.control
save Vbgr
*save V2
let qmsr = 0.1
let qmsp = 7
let step = 0.1
*dc TEMP -40 125 10
*let V1 = V2

while qmsr <= 2
  *alterparam qm = $&qmsr
  *let b0 = V1[index]/8e-6
  *let a0 = ln($&qmsr)*25e3
   alterparam a = $&qmsr
  *alterparam b = $b0
  *print a0
  *print b0
  reset 
  save all    
  
  dc TEMP -40 125 10
  plot deriv(Vbgr)  title $&qmsr
  *let V1 =V2
  *let index = 7

  let qmsr = qmsr + step
  print qmsr
end
.endc
"
spice_ignore=true}
C {devices/simulator_commands.sym} 115 -865 0 0 {name=parameterisedsim
simulator=ngspice
only_toplevel=false
place=end
value="
.param qm = 1
.param a = 60e3
.param b = 85e3
.option warn=1
.control
save Vbgr
save V2
let qmsr = 3
let qmsp = 50
let step = 10
dc TEMP -40 125 10
let V1 = V2
let index = 7
print V1
let b = V1[index]/8e-6
print b
alterparam b = b
let a= ln(V1[index])*25e3
print a
    
.endc
"
spice_ignore=true}
C {sky130_fd_pr/nfet_01v8_lvt.sym} -1675 -530 0 1 {name=M4
L=4
W=16
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt.sym} -1975 -530 0 0 {name=M5
L=4
W=16
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {devices/ngspice_get_expr.sym} -2010 -550 0 0 {name=r14 node="[expr [ngspice::get_voltage \{@m.xm5.msky130_fd_pr__nfet_01v8_lvt[vgs]\}]-[ngspice::get_voltage \{@m.xm5.msky130_fd_pr__nfet_01v8_lvt[vth]\}]]"
descr="Vov5="
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} -1715 -675 0 0 {name=M6
L=1
W=8
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {devices/ngspice_get_expr.sym} -1650 -555 0 0 {name=r10 node="[expr [ngspice::get_voltage \{@m.xm4.msky130_fd_pr__nfet_01v8_lvt[vgs]\}]-[ngspice::get_voltage \{@m.xm4.msky130_fd_pr__nfet_01v8_lvt[vth]\}]]"
descr="Vov4="
}
C {devices/ngspice_get_expr.sym} -1720 -710 0 0 {name=r11 node="[expr [ngspice::get_voltage \{@m.xm6.msky130_fd_pr__pfet_01v8_lvt[vgs]\}]-[ngspice::get_voltage \{@m.xm6.msky130_fd_pr__pfet_01v8_lvt[vth]\}]]"
descr="Vov6="
}
C {devices/ngspice_get_expr.sym} -1940 -710 0 0 {name=r12 node="[expr [ngspice::get_voltage \{@m.xm7.msky130_fd_pr__pfet_01v8_lvt[vgs]\}]-[ngspice::get_voltage \{@m.xm7.msky130_fd_pr__pfet_01v8_lvt[vth]\}]]"
descr="Vov7="
}
C {devices/spice_probe_vdiff.sym} -1795 -535 0 0 {name=p36}
C {devices/spice_probe_vdiff.sym} -1855 -535 0 0 {name=p37}
C {devices/ngspice_get_expr.sym} -2105 -285 0 0 {name=r13 node="[expr [ngspice::get_voltage \{@m.xm9.msky130_fd_pr__nfet_01v8_lvt[vgs]\}]-[ngspice::get_voltage \{@m.xm9.msky130_fd_pr__nfet_01v8_lvt[vth]\}]]"
descr="Vov9="
}
C {sky130_fd_pr/nfet_01v8_lvt.sym} -1850 -265 0 0 {name=M10
L=0.5
W=4
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {sky130_fd_pr/nfet_01v8_lvt.sym} -2165 -265 0 1 {name=M9
L=0.5
W=2
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=nfet_01v8_lvt
spiceprefix=X
}
C {devices/lab_pin.sym} -1830 -200 0 1 {name=p23 sig_type=std_logic lab=VSS
}
C {devices/lab_pin.sym} -2185 -200 0 1 {name=p24 sig_type=std_logic lab=VSS
}
C {devices/lab_pin.sym} -1740 -570 1 0 {name=p25 sig_type=std_logic lab=VSS
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} -1935 -675 0 1 {name=M7
L=1
W=8
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {devices/lab_pin.sym} -1830 -785 0 1 {name=p26 sig_type=std_logic lab=VDD
}
C {devices/lab_pin.sym} -1905 -560 1 0 {name=p27 sig_type=std_logic lab=VSS
}
C {devices/spice_probe_vdiff.sym} -2065 -670 0 0 {name=p28}
C {devices/spice_probe_vdiff.sym} -1580 -675 0 0 {name=p29}
C {devices/ngspice_get_expr.sym} -1745 -275 0 0 {name=r15 node="[expr [ngspice::get_voltage \{@m.xm10.msky130_fd_pr__nfet_01v8_lvt[vgs]\}]-[ngspice::get_voltage \{@m.xm10.msky130_fd_pr__nfet_01v8_lvt[vth]\}]]"
descr="Vov10="
}
C {devices/spice_probe_vdiff.sym} -1715 -245 0 0 {name=p30}
C {devices/spice_probe_vdiff.sym} -2280 -270 0 0 {name=p31}
C {devices/ammeter.sym} -1830 -355 0 0 {name=Vmeas3 savecurrent=true}
C {devices/lab_pin.sym} -1570 -610 0 1 {name=p19 sig_type=std_logic lab=opout
}
C {devices/lab_pin.sym} -1590 -530 0 1 {name=p20 sig_type=std_logic lab=MINUS
}
C {devices/lab_pin.sym} -2055 -530 2 1 {name=p21 sig_type=std_logic lab=PLUS
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} -2165 -680 0 1 {name=M8
L=0.5
W=20
nf=1
mult=1
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {devices/ngspice_get_expr.sym} -2130 -705 0 0 {name=r16 node="[expr [ngspice::get_voltage \{@m.xm8.msky130_fd_pr__pfet_01v8_lvt[vgs]\}]-[ngspice::get_voltage \{@m.xm8.msky130_fd_pr__pfet_01v8_lvt[vth]\}]]"
descr="Vov8="
}
C {devices/ammeter.sym} -2185 -565 0 0 {name=Vmeas2 savecurrent=true}
C {devices/spice_probe_vdiff.sym} -2280 -670 0 0 {name=p32}
C {devices/lab_pin.sym} -1290 -505 0 1 {name=p33 sig_type=std_logic lab=MINUS
}
C {devices/lab_pin.sym} -1055 -500 2 1 {name=p34 sig_type=std_logic lab=PLUS
}
C {devices/lab_pin.sym} -1060 -110 2 1 {name=p11 sig_type=std_logic lab=VSS
}
C {devices/ngspice_get_expr.sym} -1860 -715 0 0 {name=r17 node="[expr [ngspice::get_voltage \{@m.xm11.msky130_fd_pr__nfet_01v8_lvt[vgs]\}]-[ngspice::get_voltage \{@m.xm11.msky130_fd_pr__nfet_01v8_lvt[vth]\}]]"
descr="Vov11="
}
C {devices/ngspice_get_expr.sym} -1820 -685 0 0 {name=r18 node="[expr [ngspice::get_voltage \{@m.xm11.msky130_fd_pr__nfet_01v8_lvt[vgs]\}]]"
descr="Vgs11="
}
C {devices/launcher.sym} -170 -515 0 0 {name=h15
descr="Annotate OP" 
tclcommand="set show_hidden_texts 1; xschem annotate_op"
}
C {devices/lab_pin.sym} -715 -345 2 1 {name=p39 sig_type=std_logic lab=Vbgr
}
C {devices/lab_pin.sym} -650 -295 0 0 {name=p40 sig_type=std_logic lab=VSS
}
C {devices/code.sym} -15 -690 0 0 {name=NGSPICE
only_toplevel=true
value="
* this experimental option enables mos model bin 
* selection based on W/NF instead of W
* .options wnflag=1 XMU=0.49 METHOD=GEAR ITL4=100 CHGTOL=1e-15 TRTOL=1 RELTOL=0.0001 VNTOL=0.1u
.param ABSVAR=0.03
.param VCCGAUSS=agauss(1.8, 'ABSVAR', 1)
.param VDD=VCCGAUSS
*.param VDD=1.8
** variation marameters:
* .options savecurrents
.control
  setseed 12
  reset
  let run=1
  dowhile run <= 100
    if run > 1
      reset
      set appendwrite
    end
    * save all
    if run % 3 = 1
      set temp=-40
    end
    if run % 3 = 2
      set temp=27
    end
    if run % 3 = 0
      set temp=125
    end
    echo \\"Run=$&run, Temp=$temp\\"
    tran 0.2u 50u 
    write lineregulation.raw
    let run = run + 1
  end
.endc
" }
C {devices/vsource.sym} -20 -350 0 0 {name=V3 value="pwl 0 0 1u 0 4u VDD"
}
C {devices/lab_pin.sym} -20 -440 0 0 {name=l29 sig_type=std_logic lab=VDD
}
C {devices/lab_pin.sym} -20 -320 0 0 {name=l4 sig_type=std_logic lab=VSS
}
C {devices/vsource_arith.sym} -180 -350 0 0 {name=E5 VOL=temper MAX=200 MIN=-200
}
C {devices/lab_pin.sym} 80 -460 0 1 {name=p113 lab=TEMPERAT
}
C {devices/lab_pin.sym} 80 -380 0 0 {name=p114 lab=VSS
}
C {devices/spice_probe.sym} 80 -460 0 1 {name=p41 attrs=""
}
C {devices/ammeter.sym} -20 -410 2 0 {name=VDD
}
C {devices/spice_probe.sym} -1290 -505 0 1 {name=p12 attrs=""
}
C {devices/spice_probe.sym} -1050 -500 0 1 {name=p35 attrs=""
}
C {devices/lab_pin.sym} -725 -530 1 1 {name=p43 sig_type=std_logic lab=VSS
}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} -1020 -110 0 0 {name=R19
L=0.93
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} -1485 -125 0 0 {name=R3
L=6
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {sky130_fd_pr/res_xhigh_po_0p69.sym} -705 -530 0 0 {name=R4
L=12.6
model=res_xhigh_po_0p69
spiceprefix=X
mult=1
}
C {devices/ngspice_get_expr.sym} -595 -620 0 0 {name=r20 node="[expr [ngspice::get_node \{@m.xm3.msky130_fd_pr__pfet_01v8_lvt[gds]\}]]"
descr="GL3="
}
C {devices/ngspice_get_expr.sym} -915 -660 0 0 {name=r21 node="[expr [ngspice::get_node \{@m.xm2.msky130_fd_pr__pfet_01v8_lvt[gds]\}]]"
descr="GL2="
}
C {devices/ngspice_get_expr.sym} -1265 -630 0 0 {name=r22 node="[expr [ngspice::get_node \{@m.xm1.msky130_fd_pr__pfet_01v8_lvt[gds]\}]]"
descr="GL1="
}
C {sky130_fd_pr/pfet_01v8_lvt.sym} -670 -345 0 0 {name=M12
L=10
W=1
nf=1
mult=4
ad="'int((nf+1)/2) * W/nf * 0.29'" 
pd="'2*int((nf+1)/2) * (W/nf + 0.29)'"
as="'int((nf+2)/2) * W/nf * 0.29'" 
ps="'2*int((nf+2)/2) * (W/nf + 0.29)'"
nrd="'0.29 / W'" nrs="'0.29 / W'"
sa=0 sb=0 sd=0
model=pfet_01v8_lvt
spiceprefix=X
}
C {devices/lab_pin.sym} -650 -410 0 1 {name=p42 sig_type=std_logic lab=opout
}
C {devices/lab_pin.sym} -600 -345 0 1 {name=p38 sig_type=std_logic lab=opout
}
C {sky130_fd_pr/res_xhigh_po_0p35.sym} -840 -110 0 0 {name=R2
L=6
model=res_xhigh_po_0p35
spiceprefix=X
mult=1}
C {devices/lab_pin.sym} -1835 -675 3 1 {name=p44 sig_type=std_logic lab=Gcm1
}
C {devices/lab_pin.sym} -1830 -435 2 1 {name=p46 sig_type=std_logic lab=Sop
}
C {devices/lab_pin.sym} -2020 -265 3 1 {name=p47 sig_type=std_logic lab=Gcm2
}
C {devices/lab_pin.sym} -2120 -680 0 1 {name=p22 sig_type=std_logic lab=opout
}
